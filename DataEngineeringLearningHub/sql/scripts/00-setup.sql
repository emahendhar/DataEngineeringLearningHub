-- File: 00-setup.sql  → run this first!
DROP TABLE IF EXISTS employees;
DROP TABLE IF EXISTS departments;
DROP TABLE IF EXISTS orders;
DROP TABLE IF EXISTS products;

CREATE TABLE departments (
    dept_id   INTEGER PRIMARY KEY,
    dept_name TEXT
);

CREATE TABLE employees (
    emp_id    INTEGER PRIMARY KEY,
    name      TEXT,
    dept_id   INTEGER,
    salary    REAL,
    hire_date DATE
);

CREATE TABLE products (
    product_id   INTEGER PRIMARY KEY,
    product_name TEXT,
    category     TEXT,
    price        REAL
);

CREATE TABLE orders (
    order_id     INTEGER PRIMARY KEY,
    emp_id       INTEGER,
    product_id   INTEGER,
    quantity     INTEGER,
    order_date   DATE
);

-- Sample data
INSERT INTO departments VALUES
(1, 'Engineering'), (2, 'Sales'), (3, 'HR'), (4, 'Marketing');

INSERT INTO employees VALUES
(101, 'Alice', 1, 95000, '2022-03-15'),
(102, 'Bob',   1, 88000, '2023-01-20'),
(103, 'Carol', 2, 72000, '2022-11-10'),
(104, 'Dave',  2, 68000, '2024-02-05'),
(105, 'Eve',   3, 65000, '2023-07-01'),
(106, 'Frank', 1, 92000, '2022-08-22');

INSERT INTO products VALUES
(1, 'Laptop',    'Electronics', 1200),
(2, 'Mouse',     'Electronics', 25),
(3, 'Desk',      'Furniture',   300),
(4, 'Chair',     'Furniture',   150),
(5, 'Monitor',   'Electronics', 400);

INSERT INTO orders VALUES
(1001, 101, 1, 2, '2025-01-10'),
(1002, 103, 2, 10, '2025-01-12'),
(1003, 102, 3, 1, '2025-01-15'),
(1004, 101, 5, 3, '2025-02-01'),
(1005, 104, 4, 5, '2025-02-10'),
(1006, 103, 1, 1, '2025-02-20');


10 Practice Questions (solve one by one)

List all employees with their department name (simple JOIN)
Show employee name and salary only for Engineering department
Find the total salary of each department (GROUP BY + SUM)
Who is the highest-paid employee in each department? (Window function RANK or ROW_NUMBER)
List products that have never been ordered (LEFT JOIN + WHERE IS NULL)
Show total revenue (quantity × price) generated by each employee
(JOIN orders → products → calculate revenue)
Find employees who earn more than the average salary in their department
(use subquery or window function)
Show the top 2 most expensive orders with employee name and product name
List departments that have no employees (RIGHT JOIN or NOT EXISTS)
Give every employee a 10% salary hike and show the new salary (just SELECT, no UPDATE)